<!-- Navigation -->

<header class="fixed-top">
  <div class="nn-header-left">
    <a href="/">
      <i class="fa fa-bars white-font"></i>
    </a>
    <span class="d-xs-none">News</span>
  </div>
  <span class="nn-logo">N</span>
  <div class="nn-header-right">
    <i class="fa fa-search white-font"></i>
    <span *ngIf="!userInformation?.name" class="white-font d-xs-none hand"
          (click)="openVerticallyCentered(content);showMenu =! showMenu">Login</span>
    <span class="user-image d-xs-none hand" *ngIf="userInformation?.name" (click)="logout()">{{userMonoGram}}</span>
  </div>

</header>

<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" *ngIf="isLogin">Login</h4>
    <h4 class="modal-title" *ngIf="isRegister">Registration Form</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true" class="fa fa-times"></span>
    </button>
  </div>

  <div class="modal-body">
    <div *ngIf="isLogin">
      <form [formGroup]="loginForm" (ngSubmit)="onLogin(loginForm,modal)">
        <div class="form-group">
          <label for="exampleInputEmail1">Phone Number or Email</label>
          <input type="text" class="form-control" formControlName="user" id="exampleInputEmail1"
                 aria-describedby="emailHelp" placeholder="Enter email">

        </div>
        <div class="form-group">
          <label for="exampleInputPassword1">Password</label>
          <input type="password" class="form-control" formControlName="password" id="exampleInputPassword1"
                 placeholder="Password">
        </div>
        <div class="d-flex justify-content-between">
          <button type="submit" class="btn btn-primary">Login</button>
          <button type="button" class="btn btn-info" (click)="isRegister = true;isLogin = false;registrationForm()">
            Register
          </button>
        </div>
      </form>
    </div>
    <div *ngIf="isRegister">
      <form [formGroup]="registerForm" (ngSubmit)="onRegistration(registerForm)">
        <div class="form-group">
          <label for="name">Name</label>
          <input type="text" class="form-control" formControlName="name" id="name" placeholder="First Name"
                 [ngClass]="{ 'is-invalid':  registerForm.controls.name.errors && (registerForm.controls.name.touched || registerForm.controls.name.dirty) }">
          <div
            *ngIf="registerForm.controls.name.errors && (registerForm.controls.name.touched || registerForm.controls.name.dirty)"
            class="invalid-feedback">
            <div *ngIf="registerForm.controls.name.errors.required"> Name is required</div>
          </div>
        </div>
        <div class="form-group">
          <label for="emailId">Email address</label>
          <input type="email" class="form-control" formControlName="emailId" id="emailId" placeholder="Email address"
                 [ngClass]="{ 'is-invalid':  registerForm.controls.emailId.errors && (registerForm.controls.emailId.touched || registerForm.controls.emailId.dirty) }"
                 (blur)="onBlurMethod($event)">
          <div
            *ngIf="registerForm.controls.emailId.errors && (registerForm.controls.emailId.touched || registerForm.controls.emailId.dirty)"
            class="invalid-feedback">
            <div *ngIf="registerForm.controls.emailId.errors.required">Email required</div>
          </div>
        </div>
        <div class="form-group">
          <label for="phoneNum">Phone Number</label>
          <input type="text" class="form-control" formControlName="phoneNum" id="phoneNum" placeholder="Phone Number"
                 [ngClass]="{ 'is-invalid':  registerForm.controls.phoneNum.errors && (registerForm.controls.phoneNum.touched || registerForm.controls.phoneNum.dirty) }"
                 (blur)="onBlurMethod($event)">
          <div
            *ngIf="registerForm.controls.phoneNum.errors && (registerForm.controls.phoneNum.touched || registerForm.controls.phoneNum.dirty)"
            class="invalid-feedback">
            <div *ngIf="registerForm.controls.phoneNum.errors.required">Phone number required</div>
          </div>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" class="form-control" formControlName="password" id="password" placeholder="Password"
                 [ngClass]="{ 'is-invalid':  registerForm.controls.password.errors && (registerForm.controls.password.touched || registerForm.controls.password.dirty) }">
          <div
            *ngIf="registerForm.controls.password.errors && (registerForm.controls.password.touched || registerForm.controls.password.dirty)"
            class="invalid-feedback">
            <div *ngIf="registerForm.controls.password.errors.required">Password required</div>
          </div>
        </div>
        <div class="form-group">
          <ngx-recaptcha2
            [siteKey]="siteKey"
            [size]="'Normal'"
            [hl]="'en'"
            [theme]="'Light'"
            [type]="'Image'"
            (success)="handleSuccess($event)"
            formControlName="recaptchaResp">
          </ngx-recaptcha2>
        </div>
        <div class="d-flex justify-content-between">
          <button type="button" class="btn btn-info" (click)="isRegister = false;isLogin = true; loginformDetails()">
            Login
          </button>
          <button type="submit" class="btn btn-primary">Register</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
  </div>
</ng-template>

<ng-template #authenticatePopUp let-alertmodal>
  <div class="modal-header">
    <h4 class="modal-title">Want to post ?</h4>
    <button type="button" class="close" aria-label="Close" (click)="alertmodal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <p>Complete simple registration</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light" (click)="goToRegister(content, alertmodal)">Go to register</button>
  </div>
</ng-template>
